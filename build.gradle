import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar

buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:4.0.2"
    }
}

apply plugin: "com.github.johnrengelman.shadow"

group 'com.bliksemlabs'
version '1.0-SNAPSHOT'

apply plugin: "java"
apply plugin: "application"

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

mainClassName = "com.khubla.telnet.Main"

task serverJar(type: ShadowJar) {
    classifier = "server"
    manifest.attributes 'Main-Class': mainClassName
    from(project.convention.getPlugin(JavaPluginConvention).sourceSets.main.output)
    configurations = [project.configurations.runtime]
}
jar.dependsOn(serverJar)

dependencies {
    compile group: 'commons-net', name: 'commons-net', version: '3.6'
    compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'
    compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.12.1'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}
